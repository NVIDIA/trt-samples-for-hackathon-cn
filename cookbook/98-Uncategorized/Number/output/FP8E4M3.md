# FP8E4M3 - not IEEE754

+ Sign:     $s$ ($p = 1$ bit)
+ Exponent: $e$ ($q = 4$ bit)
+ Mantissa: $m$ ($r = 3$ bit)

+ Normal value ($0001_2 \le e_2 \le 1110_2$) (2 in subscript represents the base)

$$
\begin{equation}
\begin{aligned}
E &= e - \left( 2 ^ {q-1} - 1 \right) = e - 7 \\
M &= m \cdot 2 ^ {-r} = m \cdot 2 ^ {-3} \\
\text{value} &= \left( -1 \right) ^ {s} 2 ^ {E} \left( 1 + M \right) = \left( -1 \right) ^ {s} 2 ^ {-10} 2 ^ {e} \left( m + 2 ^ {3} \right)
\end{aligned}
\end{equation}
$$

+ Subnormal value ($e_2 = 0000_2$)

$$
\begin{equation}
\begin{aligned}
E &= 2 - 2 ^ {q-1} = -6 \\
M &= m \cdot 2 ^ {-r} = m \cdot 2 ^ {-3} \\
\text{value} &= \left( -1 \right) ^ {s} 2 ^ {E} M = \left( -1 \right) ^ {s} 2 ^ {-9} m
\end{aligned}
\end{equation}
$$

+ Special value
  - **No bits pattern for infinity.**

| Exponent | Mantissa | meaning |
|:-:|:-:|:-:|
| all 0 | all 0 | Signed Zero |
| all 0 | not all 0 | Subnormal Value |
| all 1 | all 0 | Normal value |
| all 1 | not all 1 | Normal value |
| all 1 | all 1 | NaN |

+ Examples

| Number($\color{#D62728}{Sign}\color{#2CA02C}{Exponent}\color{#1F77B4}{Mantissa}$) | value | comment |
|:-:|:-:|:-:|
| $\color{#D62728}{0}\color{#2CA02C}{0000}\color{#1F77B4}{000}$ | $+0$ | Positive Zero |
| $\color{#D62728}{0}\color{#2CA02C}{0000}\color{#1F77B4}{001}$ | $1.953125\times10^{-03}$ | Minimum Subnormal |
| $\color{#D62728}{0}\color{#2CA02C}{0000}\color{#1F77B4}{111}$ | $1.367188\times10^{-02}$ | Maximum Subnormal |
| $\color{#D62728}{0}\color{#2CA02C}{0001}\color{#1F77B4}{000}$ | $1.562500\times10^{-02}$ | Minimum Normal |
| $\color{#D62728}{0}\color{#2CA02C}{0110}\color{#1F77B4}{111}$ | $1 - 2 ^ {-4}$ | Largest number < 1 |
| $\color{#D62728}{0}\color{#2CA02C}{0111}\color{#1F77B4}{000}$ | $1$ |  |
| $\color{#D62728}{0}\color{#2CA02C}{0111}\color{#1F77B4}{001}$ | $1 + 2 ^ {-3}$ | Smallest number > 1 |
| $\color{#D62728}{0}\color{#2CA02C}{1000}\color{#1F77B4}{000}$ | $2$ |  |
| $\color{#D62728}{0}\color{#2CA02C}{1000}\color{#1F77B4}{100}$ | $3$ |  |
| $\color{#D62728}{0}\color{#2CA02C}{1001}\color{#1F77B4}{000}$ | $4$ |  |
| $\color{#D62728}{0}\color{#2CA02C}{1001}\color{#1F77B4}{010}$ | $5$ |  |
| $\color{#D62728}{0}\color{#2CA02C}{1001}\color{#1F77B4}{100}$ | $6$ |  |
| $\color{#D62728}{0}\color{#2CA02C}{1111}\color{#1F77B4}{110}$ | $4.480000\times10^{+02}$ | Positive maximum |
| $\color{#D62728}{1}\color{#2CA02C}{1111}\color{#1F77B4}{110}$ | $-4.480000\times10^{+02}$ | Negative maximum |
| $\color{#D62728}{1}\color{#2CA02C}{0000}\color{#1F77B4}{000}$ | $-0$ | Negative Zero |
| $\color{#D62728}{0}\color{#2CA02C}{1111}\color{#1F77B4}{111}$ | NaN | NaN |
| $\color{#D62728}{0}\color{#2CA02C}{0101}\color{#1F77B4}{011}$ | $3.437500\times10^{-01}$ | $\frac{1}{3}$ |

|$\color{#D62728}{S}$|$\color{#2CA02C}{E}$|$\color{#1F77B4}{M=000}$|$\color{#1F77B4}001$|$\color{#1F77B4}010$|$\color{#1F77B4}011$|$\color{#1F77B4}100$|$\color{#1F77B4}101$|$\color{#1F77B4}110$|$\color{#1F77B4}111$|
|:-:|:-:|-:|-:|-:|-:|-:|-:|-:|-:|
|$\color{#D62728}{0}$|$\color{#2CA02C}{0000}$|0.000000e+00|1.953125e-03|3.906250e-03|5.859375e-03|7.812500e-03|9.765625e-03|1.171875e-02|1.367188e-02|
|$\color{#D62728}{0}$|$\color{#2CA02C}{0001}$|1.562500e-02|1.757812e-02|1.953125e-02|2.148438e-02|2.343750e-02|2.539062e-02|2.734375e-02|2.929688e-02|
|$\color{#D62728}{0}$|$\color{#2CA02C}{0010}$|3.125000e-02|3.515625e-02|3.906250e-02|4.296875e-02|4.687500e-02|5.078125e-02|5.468750e-02|5.859375e-02|
|$\color{#D62728}{0}$|$\color{#2CA02C}{0011}$|6.250000e-02|7.031250e-02|7.812500e-02|8.593750e-02|9.375000e-02|1.015625e-01|1.093750e-01|1.171875e-01|
|$\color{#D62728}{0}$|$\color{#2CA02C}{0100}$|1.250000e-01|1.406250e-01|1.562500e-01|1.718750e-01|1.875000e-01|2.031250e-01|2.187500e-01|2.343750e-01|
|$\color{#D62728}{0}$|$\color{#2CA02C}{0101}$|2.500000e-01|2.812500e-01|3.125000e-01|3.437500e-01|3.750000e-01|4.062500e-01|4.375000e-01|4.687500e-01|
|$\color{#D62728}{0}$|$\color{#2CA02C}{0110}$|5.000000e-01|5.625000e-01|6.250000e-01|6.875000e-01|7.500000e-01|8.125000e-01|8.750000e-01|9.375000e-01|
|$\color{#D62728}{0}$|$\color{#2CA02C}{0111}$|1.000000e+00|1.125000e+00|1.250000e+00|1.375000e+00|1.500000e+00|1.625000e+00|1.750000e+00|1.875000e+00|
|$\color{#D62728}{0}$|$\color{#2CA02C}{1000}$|2.000000e+00|2.250000e+00|2.500000e+00|2.750000e+00|3.000000e+00|3.250000e+00|3.500000e+00|3.750000e+00|
|$\color{#D62728}{0}$|$\color{#2CA02C}{1001}$|4.000000e+00|4.500000e+00|5.000000e+00|5.500000e+00|6.000000e+00|6.500000e+00|7.000000e+00|7.500000e+00|
|$\color{#D62728}{0}$|$\color{#2CA02C}{1010}$|8.000000e+00|9.000000e+00|1.000000e+01|1.100000e+01|1.200000e+01|1.300000e+01|1.400000e+01|1.500000e+01|
|$\color{#D62728}{0}$|$\color{#2CA02C}{1011}$|1.600000e+01|1.800000e+01|2.000000e+01|2.200000e+01|2.400000e+01|2.600000e+01|2.800000e+01|3.000000e+01|
|$\color{#D62728}{0}$|$\color{#2CA02C}{1100}$|3.200000e+01|3.600000e+01|4.000000e+01|4.400000e+01|4.800000e+01|5.200000e+01|5.600000e+01|6.000000e+01|
|$\color{#D62728}{0}$|$\color{#2CA02C}{1101}$|6.400000e+01|7.200000e+01|8.000000e+01|8.800000e+01|9.600000e+01|1.040000e+02|1.120000e+02|1.200000e+02|
|$\color{#D62728}{0}$|$\color{#2CA02C}{1110}$|1.280000e+02|1.440000e+02|1.600000e+02|1.760000e+02|1.920000e+02|2.080000e+02|2.240000e+02|2.400000e+02|
|$\color{#D62728}{0}$|$\color{#2CA02C}{1111}$|2.560000e+02|2.880000e+02|3.200000e+02|3.520000e+02|3.840000e+02|4.160000e+02|4.480000e+02|     nan|
|$\color{#D62728}{1}$|$\color{#2CA02C}{0000}$|-0.000000e+00|-1.953125e-03|-3.906250e-03|-5.859375e-03|-7.812500e-03|-9.765625e-03|-1.171875e-02|-1.367188e-02|
|$\color{#D62728}{1}$|$\color{#2CA02C}{0001}$|-1.562500e-02|-1.757812e-02|-1.953125e-02|-2.148438e-02|-2.343750e-02|-2.539062e-02|-2.734375e-02|-2.929688e-02|
|$\color{#D62728}{1}$|$\color{#2CA02C}{0010}$|-3.125000e-02|-3.515625e-02|-3.906250e-02|-4.296875e-02|-4.687500e-02|-5.078125e-02|-5.468750e-02|-5.859375e-02|
|$\color{#D62728}{1}$|$\color{#2CA02C}{0011}$|-6.250000e-02|-7.031250e-02|-7.812500e-02|-8.593750e-02|-9.375000e-02|-1.015625e-01|-1.093750e-01|-1.171875e-01|
|$\color{#D62728}{1}$|$\color{#2CA02C}{0100}$|-1.250000e-01|-1.406250e-01|-1.562500e-01|-1.718750e-01|-1.875000e-01|-2.031250e-01|-2.187500e-01|-2.343750e-01|
|$\color{#D62728}{1}$|$\color{#2CA02C}{0101}$|-2.500000e-01|-2.812500e-01|-3.125000e-01|-3.437500e-01|-3.750000e-01|-4.062500e-01|-4.375000e-01|-4.687500e-01|
|$\color{#D62728}{1}$|$\color{#2CA02C}{0110}$|-5.000000e-01|-5.625000e-01|-6.250000e-01|-6.875000e-01|-7.500000e-01|-8.125000e-01|-8.750000e-01|-9.375000e-01|
|$\color{#D62728}{1}$|$\color{#2CA02C}{0111}$|-1.000000e+00|-1.125000e+00|-1.250000e+00|-1.375000e+00|-1.500000e+00|-1.625000e+00|-1.750000e+00|-1.875000e+00|
|$\color{#D62728}{1}$|$\color{#2CA02C}{1000}$|-2.000000e+00|-2.250000e+00|-2.500000e+00|-2.750000e+00|-3.000000e+00|-3.250000e+00|-3.500000e+00|-3.750000e+00|
|$\color{#D62728}{1}$|$\color{#2CA02C}{1001}$|-4.000000e+00|-4.500000e+00|-5.000000e+00|-5.500000e+00|-6.000000e+00|-6.500000e+00|-7.000000e+00|-7.500000e+00|
|$\color{#D62728}{1}$|$\color{#2CA02C}{1010}$|-8.000000e+00|-9.000000e+00|-1.000000e+01|-1.100000e+01|-1.200000e+01|-1.300000e+01|-1.400000e+01|-1.500000e+01|
|$\color{#D62728}{1}$|$\color{#2CA02C}{1011}$|-1.600000e+01|-1.800000e+01|-2.000000e+01|-2.200000e+01|-2.400000e+01|-2.600000e+01|-2.800000e+01|-3.000000e+01|
|$\color{#D62728}{1}$|$\color{#2CA02C}{1100}$|-3.200000e+01|-3.600000e+01|-4.000000e+01|-4.400000e+01|-4.800000e+01|-5.200000e+01|-5.600000e+01|-6.000000e+01|
|$\color{#D62728}{1}$|$\color{#2CA02C}{1101}$|-6.400000e+01|-7.200000e+01|-8.000000e+01|-8.800000e+01|-9.600000e+01|-1.040000e+02|-1.120000e+02|-1.200000e+02|
|$\color{#D62728}{1}$|$\color{#2CA02C}{1110}$|-1.280000e+02|-1.440000e+02|-1.600000e+02|-1.760000e+02|-1.920000e+02|-2.080000e+02|-2.240000e+02|-2.400000e+02|
|$\color{#D62728}{1}$|$\color{#2CA02C}{1111}$|-2.560000e+02|-2.880000e+02|-3.200000e+02|-3.520000e+02|-3.840000e+02|-4.160000e+02|-4.480000e+02|     nan|
